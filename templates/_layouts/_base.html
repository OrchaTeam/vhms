{% load i18n widget_tweaks %}
{% load static from staticfiles %}
<!doctype html>
<html>
<head>
    {% block page_css %}
    <link rel="shortcut icon" href="{% static "ico/favicon.png" %}">
    <link rel="stylesheet" href="{% static "css/bootstrap.css" %}"/>
    <link rel="stylesheet" href="{% static "css/style.css" %}"/>
    <link rel="stylesheet" href="{% static "css/alert-blackgloss.css" %}"/>
    {% endblock page_css %}
    <title>
        {% block page_title %}{% endblock %} - Virtual Hand Made Shop
    </title>
</head>
<body>
    <header>
        {% include "_layouts/_header.html" %}
    </header>
    <div class='notifications top-right blackgloss'></div>
    {% block page_content %}
    {% endblock %}
    {% block page_under_content %}
    {% endblock %}
    <div id="footer">
        {% block page_footer %}
        {% endblock %}
    </div>
</body>
</html>

<!-- { DEFECT: fix a view of notifications. It shows one message instead of all. -->
{% block page_js %}
<script src="https://code.jquery.com/jquery.js"></script>
<script src="{% static "js/bootstrap.js" %}"></script>
<script src="{% static "js/bootstrap-notify.js" %}"></script>
<script src="{% static "js/scripts.js" %}"></script>
{% for message in messages %}
    <script type="text/javascript"> 
        //$('#alertModal').modal();
        $('.top-right').notify({
            closable: false,
            message: { 
                html: '<p>{{ message }}</p>',
                text: '{{ message }}' 
            },
            type: 'info'
        }).show();
    </script>
{% endfor %}

<script type="text/javascript"> 
{% if form.errors or form.non_field_errors %}
    {% for field in form %}
        {% if field.errors %}
            $('.top-right').notify({
                closable: false,
                message: {
                    html: '<strong>{% trans "Error" %} </strong><p>{{ field.label }}: {{ field.errors|striptags }}</p>',
                    text: '<p>{{ field.label }}: {{ field.errors|striptags }}</p>' },
                type: 'info'
            }).show();
        {% endif %}
    {% endfor %}
    {% for error in form.non_field_errors %}
        $('.top-right').notify({
            closable: false,
            message: { 
                text: '{{ error }}' },
            type: 'info'
        }).show();
    {% endfor %}
{% endif %}
 </script>
{% endblock %}


<!--error popup-->
{% if form.errors or form.non_field_errors %}
<div class="alert alert-warning form-signin-alert">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
    <strong>{% trans "Error" %}</strong>
    {% for field in form %}
        {% if field.errors %}
        <p>{{ field.label }}: {{ field.errors|striptags }}</p>
        {% endif %}
    {% endfor %}
    {% for error in form.non_field_errors %}
        {{ error }}
    {% endfor %}
</div>
{% endif %}